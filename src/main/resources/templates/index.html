<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Book Club</title>
    <link th:rel="stylesheet" th:href="@{/webjars/bootstrap/5.2.3/css/bootstrap.min.css}">
    <link th:rel ="stylesheet" type="text/css" th:href="@{/static/main.css}">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body class="dark">
<div th:insert="~{common/navbar :: navbar}"></div>
<div th:replace="~{common/notifications :: notificationsModal}"></div>


<div class="container">
    <h1>Welcome to Book Club!</h1>
    <hr />

    <table class="table table-bordered table-striped">
        <thead>
        <tr>
            <th>Image</th>
            <th>Title</th>
            <th>Author</th>
            <th>ISBN</th>
            <th>Description</th>
            <th>BorrowedFromUser</th>
            <th>LentToUser</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="item: ${books}" class="clickable-row">
            <td><img th:src="${item.BookCoverUrl}"/></td>
            <td th:attr="data-href=@{/book_details/{bookId}(bookId=${item.Id})}" class="book-id" th:hidden="true" th:text="${item.Id}"></td>
            <td th:text="${item.Title}"></td>
            <td th:text="${item.Author}"></td>
            <td th:text="${item.Isbn}"></td>
            <td th:text="${item.Description}"></td>
            <td th:text="${item.BorrowedFromUser != null ? item.BorrowedFromUser.getFullName() : ''}"></td>
            <td th:text="${item.LentToUser != null ? item.LentToUser.getFullName() : ''}"></td>
        </tr>
        </tbody>
    </table>
</div>

<script>
    // Make the rows clickable
    $('.clickable-row').on('click', function() {
        var bookId = $(this).find('.book-id').text();
        window.location.href = $(this).find('.book-id').data('href');
    });
</script>

</body>
</html>
